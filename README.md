# 🌍 World War Simulator (세계 대전 시뮬레이터)

D3.js와 React를 기반으로 한 인터랙티브 세계 대전 전략 시뮬레이션 게임입니다. 플레이어는 원하는 국가를 선택하여 복잡한 정치, 경제, 군사 시스템을 통해 세계 패권을 차지하는 것을 목표로 합니다.

## ✨ 주요 특징

### 🎮 게임플레이 시스템
- **실시간 전략 시뮬레이션**: 게임 속도 조절 가능 (정지, 1x, 4x, 8x)
- **복합적 국가 관리**: 경제력, 기술력, 외교력, 자원력, 정치 자본, 군사력을 통합적으로 관리합니다.
- **정책 시스템**: 다양한 정책을 통해 국가 발전 전략을 수립하고, 국가 정신을 획득/변경할 수 있습니다.
- **시대 진행**: 게임 진행에 따른 시대적 변화(초기, 산업, 현대, 정보, 미래)와 새로운 기술/정책 해금.
- **국가 정신**: 각 국가의 고유한 특성과 보너스를 제공하는 시스템.
- **이벤트 로그**: 게임 내 주요 사건들을 기록하여 플레이어가 상황을 파악하도록 돕습니다.
- **게임 요약**: 게임 종료 시 승리/패배 조건, 주요 이벤트, 플레이어 스탯 변화, 최종 국가 순위를 제공합니다.

### 🗺️ 지도 및 영토 관리
- **인터랙티브 SVG 세계지도**: D3.js 기반의 부드러운 지도 상호작용 (확대/축소, 국가 정보 표시).
- **영토 점령 시스템**: 전쟁을 통해 다른 국가의 영토를 점령하여 국력을 신장시킵니다.
- **저항 및 반란 시스템**: 점령지에는 저항도가 발생하며, 높아질 경우 반란 위험 및 생산 차질이 발생합니다. 주둔군과 정책을 통해 관리할 수 있습니다.
- **실시간 국경 변화**: 전쟁 결과에 따른 즉시 지도 업데이트.
- **동적 최대 군사력**: 점령한 영토의 원 소유국 최대 군사력의 10%만큼 자국의 최대 군사력 잠재치가 증가합니다.

### 💰 경제 및 예산 관리
- **세부 예산 배분**: GDP 대비 국방예산 비율 설정 및 민간 예산(경제, 기술, 외교, 자원) 배분.
- **자동/수동 관리**: 플레이어는 예산 관리를 AI에 위임하거나 직접 수동으로 조절할 수 있습니다. (플레이어의 경우 기본값: 자동 ON)
- **GDP 성장**: 정책, 예산 배분, 점령지 수입에 따른 동적 경제 성장.
- **자원 관리**: 자원 보유량은 정책과 예산 배분, 점령지 수입에 따라 변동됩니다.

### 🤝 외교 시스템
- **관계 관리**: 다른 국가와의 관계를 개선하거나 악화시킬 수 있습니다. (정치 자본 소모)
- **동맹 시스템**: 우호적인 국가와 동맹을 제안하거나, 기존 동맹을 파기할 수 있습니다.
- **휴전 시스템**: 전쟁 중인 국가와 휴전을 제안하거나 수락할 수 있습니다.
- **선전포고**: 다른 국가에 전쟁을 선포할 수 있습니다. (정치 자본 및 호전성 패널티)
- **외교 제안 처리**: 다른 국가로부터 받은 동맹/휴전 제안을 수락하거나 거절할 수 있습니다.
- **자동 외교 위임**: AI가 플레이어를 대신하여 외교 활동을 수행할 수 있습니다. (플레이어의 경우 기본값: 자동 ON)
    - **플레이어 국가의 자동 선전포고**: AI는 플레이어 국가가 특정 조건(약소국 대상 등) 만족 시 자동으로 다른 AI 국가에 선전포고합니다.
    - **AI 국가의 플레이어 공격**: AI 국가는 플레이어보다 군사력이 약하고 전쟁 중이 아닐 경우, 플레이어에게 선전포고할 수 있습니다.
- **정치 자본**: 외교 활동 및 정책 제정에 필요한 핵심 자원. 외교력, 정책, 국가 정신 등을 통해 획득합니다. (외교력 기반 획득량 기존 대비 4배 증가)

### ⚔️ 군사 시스템
- **군사력 구성**: 육군, 해군, 공군으로 구성된 실시간 군사력.
- **군사력 회복**: 평시에는 군사력이 최대치까지 회복되며, 기술, 예산, 인구, 정책 등에 영향을 받습니다.
- **전쟁 수행**: 국가 간 전쟁 발발 시 군사력 손실, GDP 및 인구 감소, 자원 소모 등이 발생합니다.
- **호전성 점수**: 국가의 공격적인 성향을 나타내며, 전쟁 선포 등으로 증가하고 시간이 지남에 따라 감소합니다.

## 🚀 시작하기

### 필수 요구사항
- Node.js 16.0 이상
- npm 또는 yarn 패키지 매니저

### 설치 및 실행

1. **저장소 클론**
```bash
git clone https://github.com/sigco3111/World_War_Simulator.git # 실제 저장소 URL로 변경해주세요
cd World_War_Simulator
```

2. **의존성 설치**
```bash
npm install
```

3. **개발 서버 실행**
```bash
npm run dev
```

4. **브라우저에서 접속**
```
http://localhost:5173 # Vite 기본 포트
```

### 빌드
```bash
npm run build
```

## 🎯 게임 방법

### 기본 플레이
1. **국가 선택**: 세계지도에서 플레이할 국가를 클릭. 정보 패널에서 '상세 정보' 탭이 기본으로 표시됩니다.
2. **게임 시작**: 정보 패널의 '시뮬레이션 시작' 버튼으로 게임 개시.
3. **전략 수립**:
    - **정책**: 정책 패널에서 정치 자본을 소모하여 국가 발전을 위한 정책 제정. ("정책 자동" 토글로 AI 위임 가능)
    - **예산**: 예산 패널에서 국방 및 민간 투자 비율 조정. ("예산 자동" 토글로 AI 위임 가능, 플레이어의 경우 기본값 ON)
    - **외교**: 외교 패널에서 다른 국가와 관계 개선, 동맹, 선전포고 등 수행. ("외교 자동" 토글로 AI 위임 가능, 플레이어의 경우 기본값 ON)
4. **영토 확장**: 다른 국가와의 전쟁을 통해 영토를 확장하고, 점령지 관리.
5. **승리 조건**: 모든 적국을 제거하여 세계 통일 달성 또는 게임 종료 시점에서 가장 강력한 국가로 인정받기.

### 핵심 관리 요소
- **💰 경제력**: GDP 성장과 전반적인 국력의 기반.
- **🔬 기술력**: 새로운 정책과 군사 기술 해금, 군사력 회복 및 점령지 관리에 영향.
- **🤝 외교력**: 정치적 자본 획득량 증가 및 국제 관계에 영향.
- **⛏️ 자원력**: 지속 가능한 발전을 위한 자원 확보.
- **🏛️ 정치 자본 (PC)**: 정책 제정 및 외교 행동에 필요한 핵심 자원.
- **⚔️ 군사력**: 육군, 해군, 공군의 균형 잡힌 발전과 전략적 운용. 최대 군사력은 점령지를 통해 증가 가능.

## 🎮 게임 시스템 및 규칙 (상세)

### 1. 게임 목표 및 진행
- **목표**: 플레이어 국가로 다른 모든 국가를 정복하거나, 게임 종료 시점에서 가장 강력한 국가가 되는 것입니다.
- **게임 시작**: 플레이어는 세계 지도에서 시작 국가를 선택합니다. 각 국가는 고유의 초기 능력치와 자원을 가집니다.
- **시간 경과**: 게임은 "틱(tick)" 단위로 진행됩니다. 1일이 1틱에 해당하며, 365일이 지나면 1년이 증가합니다. 게임 속도는 조절 가능합니다.
- **시대 변화**: 특정 연도가 되거나 게임 내 조건(예: 평균 기술 수준)이 충족되면 새로운 시대로 진입합니다. (예: 초기 시대 → 산업 시대 → 현대 시대). 시대 변화는 새로운 정책이나 기술을 해금할 수 있습니다.

### 2. 핵심 국가 통계
- **인구 (Population)**: 국가의 기본적인 힘. 전쟁 시 감소하며, 평시에 서서히 회복될 수 있습니다. 군사 유닛 회복에 간접적인 영향을 줍니다.
- **GDP (Gross Domestic Product)**: 국가의 총 경제 생산력. 정책, 예산 배분, 점령지로부터의 수입을 통해 성장합니다. 전쟁 중에는 성장이 멈추거나 감소할 수 있습니다. 국방 예산의 기준이 됩니다.
- **국방 예산 (Defense Budget)**: GDP 대비 일정 비율(%)로 설정됩니다. 군사 유닛 회복 및 유지에 사용됩니다. 과도한 국방 예산은 경제 성장, 자원 획득, 외교력에 부정적인 영향을 줄 수 있습니다.
- **민간 예산 배분 (Civilian Budget Allocation)**: 국방 예산을 제외한 예산을 경제 개발, 기술 연구, 외교 활동, 자원 확충 네 분야에 100% 기준으로 배분합니다. 각 분야의 투자 비율에 따라 해당 분야의 포인트 획득량이 달라집니다.
- **기본 능력치 (경제력, 기술력, 외교력, 자원 보유량)**: 0-1000 사이의 값으로 표현됩니다. 민간 예산 배분, 정책, 국가 정신 등을 통해 해당 분야의 포인트를 획득하여 성장시킵니다.
    - **경제력**: GDP와 연동되며, 전반적인 국가 생산성을 나타냅니다.
    - **기술력**: 군사 유닛의 질, 회복 효율, 반란 진압, 특정 정책 해금 등에 영향을 줍니다.
    - **외교력**: 턴당 정치 자본(PC) 획득량에 영향을 주며, 외교적 성공 가능성을 높일 수 있습니다.
    - **자원 보유량**: 국가의 산업 및 군사 활동 유지에 필요한 자원의 양을 나타냅니다.
- **정치 자본 (Political Capital, PC)**: 최대 200까지 보유 가능합니다. 턴마다 기본량 + 외교력 기반 추가량 + 정책/국가 정신 효과로 획득합니다. 정책 제정, 외교 행동(관계 개선/악화, 동맹 제안, 휴전 제안, 선전포고 등)에 소모됩니다.
- **군사력 (Military Strength)**:
    - **구성**: 육군, 해군, 공군으로 나뉩니다.
    - **최대 군사력 (Max Military)**: 각 국가는 초기 최대 군사력 한도를 가집니다. 이 한도는 점령지를 통해 증가할 수 있으며, 점령한 각 영토의 원 소유국 초기 최대 군사력의 10%만큼 현재 국가의 육군, 해군, 공군 최대치가 각각 증가합니다.
    - **현재 군사력 (Current Military)**: 실제 보유한 군사력. 전투를 통해 손실되며, 평시에 최대 군사력까지 회복됩니다.
    - **군사력 회복**: 평시에만 이루어지며, 국가의 기술력, 국방 예산 배분량, 현재 인구, 관련 정책/국가 정신, 유닛당 회복 비용(예산 및 인구)에 따라 회복 속도가 결정됩니다.
- **호전성 (Aggression Score)**: 0-100 사이의 값. 선전포고, 동맹/휴전 파기 등으로 증가하며, 시간이 지남에 따라 또는 특정 정책/국가 정신에 의해 감소합니다. AI 국가의 공격성 판단에 사용됩니다.

### 3. 영토 및 점령
- **영토 획득**: 전쟁에서 승리하여 상대방 국가를 정복하면 해당 국가의 모든 영토(원래 영토 및 기존 점령지)를 흡수합니다.
- **점령지 수입**: 점령지는 원 소유국의 GDP 및 자원 생산량의 일부를 점령국에 제공합니다. 이 수입은 점령지의 저항도에 따라 감소합니다.
- **저항도 (Resistance Level)**: 0-100 사이의 값. 점령지에 기본적으로 발생하며, 시간이 지남에 따라 증가합니다. 특정 정책이나 주둔군 활동으로 관리할 수 있습니다. 저항도가 높을수록 점령지 수입이 감소하고 반란 위험이 증가합니다.
- **반란 (Rebellion)**:
    - **반란 위험 (Rebellion Risk)**: 0-100% 사이의 값. 저항도, 정책, 국가 정신 등에 따라 변동합니다. 특정 임계치를 넘으면 반란 이벤트 발생 확률이 생깁니다.
    - **반란 이벤트**: 발생 시 점령국은 정치 자본 페널티를 받고, 해당 점령지는 일정 기간 생산 차질을 겪습니다. 반란군이 생성됩니다.
    - **반란군 (Rebel Strength)**: 반란 발생 시 생성되는 반란군의 세력. 국가의 기술력, 반란 진압 관련 정책/국가 정신에 의해 생성 규모가 조절됩니다.
    - **반란 진압**: 점령국의 주둔군(육군 일부가 자동으로 할당됨)과 반란군 간의 전투가 발생합니다. 주둔군의 효율은 기술력, 정책, 국가 정신에 영향을 받습니다. 반란군이 완전히 진압되면 해당 지역의 저항도와 반란 위험이 일시적으로 감소합니다. 반란군 세력이 일정 수준 이상이면 계속 생산 차질을 유발합니다.

### 4. 정책 (Policies)
- **제정**: 정치 자본(PC)과 경우에 따라 GDP의 일부를 소모하여 제정합니다.
- **선결 조건**: 특정 시대, 기술 수준, 또는 다른 정책/국가 정신을 요구할 수 있습니다.
- **효과**: 일시적 효과(예: 즉시 자원 획득) 또는 지속적 효과(예: 턴당 GDP 성장률 증가)를 가집니다. 효과는 국가 자체 또는 점령지에만 적용될 수 있습니다.
- **자동 제정**: 플레이어 국가가 "정책 자동 위임"을 켤 경우, AI가 조건이 맞는 정책 중 무작위 또는 우선순위에 따라 자동으로 제정합니다.

### 5. 국가 정신 (National Spirits)
- **획득**: 특정 정책 제정, 이벤트 발생 등을 통해 획득할 수 있습니다.
- **효과**: 대부분 지속적인 보너스 또는 페널티를 국가에 부여합니다. (예: 특정 자원 생산량 증가, 군사 유닛 회복 속도 증가 등)

### 6. 외교 (Diplomacy)
- **관계도 (Relations)**: -100 (매우 적대적)부터 +100 (매우 우호적)까지. 외교 행동, 동맹 여부, 전쟁 상태 등에 따라 변동합니다. 시간이 지남에 따라 중립(0)으로 점차 회귀하는 경향이 있습니다.
- **동맹 (Alliances)**:
    - **제안**: 관계도가 일정 수준(예: +50) 이상인 국가에게 정치 자본을 소모하여 제안할 수 있습니다.
    - **수락/거절**: 제안을 받은 국가는 AI 로직(관계도, 군사력 비교, 호전성 등) 또는 플레이어의 선택에 따라 결정합니다.
    - **효과**: 동맹국 간에는 관계도에 보너스가 붙을 수 있습니다. (현재 게임에서는 자동 참전 등의 구체적인 동맹 효과는 제한적입니다.)
    - **파기**: 정치 자본 소모, 호전성 증가, 관계도 대폭 하락의 페널티를 감수하고 동맹을 파기할 수 있습니다.
- **휴전 (Truces)**:
    - **제안**: 전쟁 중인 국가에게 정치 자본을 소모하여 제안할 수 있습니다.
    - **수락/거절**: 제안 받은 국가의 AI 로직 또는 플레이어 선택으로 결정. 수락 시 일정 기간(예: 5년) 동안 상호 불가침 상태가 됩니다.
    - **효과**: 전쟁이 중단되고, 관계도가 소폭 개선됩니다.
    - **파기**: 휴전 기간 중 파기 시 큰 호전성 증가와 관계도 하락 페널티를 받습니다.
- **선전포고 (Declare War)**:
    - **비용**: 정치 자본을 소모하며, 호전성이 증가하고 대상 국가와의 관계도가 대폭 하락합니다.
    - **제한**: 이미 동맹이거나, 전쟁 중이거나, 휴전 중인 국가에게는 선전포고할 수 없습니다.
- **외교 제안 (Diplomatic Proposals)**: 다른 국가로부터 동맹 또는 휴전 제안을 받을 수 있습니다. 제안은 일정 시간 후 만료될 수 있습니다.
- **AI 외교 행동**:
    - **일반 AI**: 각 AI 국가는 자체적인 호전성 점수와 주변국과의 관계를 기반으로 전쟁을 선포하거나 외교적 상호작용을 시도합니다.
    - **플레이어 "외교 자동 위임" ON 시**:
        - 플레이어 국가를 대신하여 AI가 약소국에게 전쟁을 선포할 수 있습니다 (플레이어의 정치 자본 소모, 특정 조건 만족 및 확률에 따름).
        - 다른 AI 국가가 특정 조건(플레이어보다 약하고, 전쟁 중이 아니며, 관계가 나쁨 등)을 만족하면 플레이어에게 선전포고할 수 있습니다.

### 7. 전쟁 (Warfare)
- **개전**: 한 국가가 다른 국가에 선전포고하면 전쟁 상태가 됩니다.
- **전투 시뮬레이션**:
    - **손실 계산**: 매 틱마다 교전국 간에 군사력 손실이 발생합니다. 손실률은 양국의 기술력 차이, 방어 효율 관련 정책/국가 정신, 적 소모율 관련 정책/국가 정신 등에 영향을 받습니다.
    - **피해 유형**: 육군, 해군, 공군 유닛 손실 외에도 인구 감소, GDP 감소, 자원 소모가 발생합니다.
- **전쟁 지속 및 해결**:
    - 각 전쟁은 기본적인 지속 시간(Ticks to Resolution)을 가집니다.
    - 한쪽의 군사력(육군, 해군, 공군 총합)이 0이 되면 즉시 패배하고 상대방에게 정복당합니다.
    - 전쟁 지속 시간이 다 되면, 남은 군사력과 기술력 등을 종합적으로 비교하여 승패를 결정합니다.
- **전쟁 결과**:
    - **승리 (정복)**: 패배한 국가의 모든 영토를 흡수하고, 인구 및 기술력의 일부를 얻습니다. 승리한 국가는 호전성이 일부 감소합니다.
    - **패배 (피정복)**: 국가는 소멸(Eliminated) 처리되고, 모든 영토와 자산을 잃습니다.
    - **방어 성공**: 공격을 막아낸 국가는 호전성이 일부 감소합니다.

### 8. 게임 종료 조건
- **플레이어 패배**: 플레이어 국가가 다른 국가에 의해 정복당하면 즉시 게임 오버.
- **세계 정복**: 플레이어 국가가 다른 모든 국가를 정복하면 승리.
- **최후의 1인**: 플레이어가 아닌 AI 국가가 세계를 통일해도 게임 종료.
- **전원 멸망**: 드물지만, 모든 국가가 서로 물고 물리다 소멸하면 무승부로 게임 종료.
- **게임 요약**: 게임 종료 시, 승패 여부, 승리 국가, 주요 이벤트 로그, 플레이어 국가 스탯 변화 그래프, 최종 국가 순위(생존 기간 및 정복 순서 기반)가 제공됩니다.

## 🏗️ 기술 스택

### 프론트엔드
- **React 19.1.0**: 컴포넌트 기반 UI 프레임워크
- **TypeScript**: 타입 안전성을 보장하는 정적 타입 언어
- **D3.js**: 지도 렌더링 및 상호작용 구현
  - d3-geo: 지리적 투영 및 경로 생성
  - d3-selection: DOM 조작
  - d3-zoom: 지도 확대/축소 기능
- **Tailwind CSS**: UI 스타일링

### 지도 데이터
- **TopoJSON**: 효율적인 지리 데이터 형식 (countries-110m.json 사용)
- **GeoJSON**: 표준 지리 데이터 교환 형식

### 개발 도구
- **Vite**: 빠른 빌드 도구 및 개발 서버
- **Node.js**: 백엔드 런타임 환경 (개발 시)

## 📁 프로젝트 구조

```
World_War_Simulator/
├── components/           # React 컴포넌트
│   ├── WorldMap.tsx     # 메인 지도 및 정보 패널 컴포넌트
│   ├── GameControls.tsx # 게임 속도 및 재시작 컨트롤
│   ├── EventLog.tsx     # 게임 이벤트 로그 표시
│   ├── BudgetControlsPanel.tsx # 예산 관리 UI
│   ├── DiplomacyPanel.tsx    # 외교 관리 UI
│   ├── PolicyPanel.tsx       # 정책 관리 UI
│   ├── PlayerStatsChart.tsx    # 플레이어 통계 변화 차트
│   └── GameSummaryModal.tsx    # 게임 종료 요약 모달
├── data/                # 게임 데이터
│   └── countryData.ts   # 국가별 초기 데이터 정의
├── game/                # 게임 로직 및 타입 정의
│   ├── types.ts         # TypeScript 타입 정의 및 핵심 상수
│   ├── policies.ts      # 정책 시스템 데이터 및 로직
│   ├── eras.ts          # 시대 시스템 데이터
│   └── nationalSpirits.ts # 국가 정신 데이터
├── App.tsx              # 메인 애플리케이션 로직 및 상태 관리 컴포넌트
├── index.tsx            # React 애플리케이션 진입점
└── vite.config.ts       # Vite 설정 파일
```

## 🤝 기여하기

프로젝트에 기여하고 싶으시다면:

1. 이 저장소를 포크합니다.
2. 새로운 기능 브랜치를 생성합니다 (`git checkout -b feature/새기능`).
3. 변경사항을 커밋합니다 (`git commit -am '새 기능 추가'`).
4. 브랜치에 푸시합니다 (`git push origin feature/새기능`).
5. Pull Request를 생성합니다.

### 개발 가이드라인
- TypeScript 타입 안전성 준수.
- 컴포넌트별 단일 책임 원칙 적용.
- 한국어 주석을 통한 코드 문서화 권장.
- 사용자 피드백 및 오류 처리를 고려한 개발.

## 📝 라이선스

이 프로젝트는 [MIT License](LICENSE) (아직 파일 없음, 추후 추가 가능)에 따라 라이선스가 부여됩니다.

## 🔮 향후 계획

- **고급 전투 모델**: 지형, 보급, 유닛 상성 등을 고려한 전투 시스템.
- **세분화된 외교 옵션**: 평화 협정 조건(영토 할양, 배상금), 무역 협정, 기술 공유 등.
- **AI 행동 패턴 개선**: 더욱 전략적이고 예측 불가능한 AI 국가 운영.
- **이벤트 시스템 확장**: 역사적/가상 이벤트를 통한 게임의 다양성 증대.
- **UI/UX 개선**: 사용자 편의성 및 시각적 효과 향상.

## 📞 문의

문의사항이나 버그 리포트는 [Issues](https://github.com/sigco3111/World_War_Simulator/issues) #실제 저장소 URL의 이슈 페이지로 변경해주세요. 페이지를 이용해 주세요.

---
**즐거운 세계 정복을 위한 여정을 시작하세요! 🌍⚔️**
